<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Coletor de Sonhos</title>
  <meta name="description" content="Conte seu sonho. Este projeto acolhe relatos de mulheres sobre o universo on√≠rico para pesquisa/express√£o art√≠stica." />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; }
    /* Estrelas simples via gradientes (leve e sem imagens) */
    .starfield {
      position: fixed; inset: 0; pointer-events: none; z-index: 0;
      background-image:
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.75), rgba(255,255,255,0) 60%),
        radial-gradient(1.5px 1.5px at 40% 80%, rgba(255,255,255,.5), rgba(255,255,255,0) 60%),
        radial-gradient(1.2px 1.2px at 70% 20%, rgba(255,255,255,.6), rgba(255,255,255,0) 60%),
        radial-gradient(1.6px 1.6px at 85% 60%, rgba(255,255,255,.55), rgba(255,255,255,0) 60%),
        radial-gradient(1.4px 1.4px at 15% 70%, rgba(255,255,255,.45), rgba(255,255,255,0) 60%);
      animation: twinkle 9s ease-in-out infinite;
      opacity: .5;
    }
    @keyframes twinkle { 0%,100% { opacity: .35 } 50% { opacity: .8 } }
    /* Orbes on√≠ricos suaves */
    .orb { filter: blur(64px); opacity: .35; }

    /* Aumenta contraste do texto e do placeholder nos campos claros */
    input, textarea, select { color: #0f172a; }              /* slate-900 */
    input::placeholder, textarea::placeholder {
      color: #0f172a;  /* slate-500 */
      opacity: 1;
    }
  </style>
</head>
<body class="relative min-h-screen bg-gradient-to-b from-indigo-950 via-slate-950 to-black text-slate-100">
  <!-- Camadas decorativas on√≠ricas -->
  <div class="starfield"></div>
  <div class="pointer-events-none absolute -top-24 -left-24 h-80 w-80 rounded-full orb bg-gradient-to-tr from-indigo-500/40 to-cyan-400/20"></div>
  <div class="pointer-events-none absolute top-32 -right-16 h-72 w-72 rounded-full orb bg-gradient-to-tr from-blue-500/30 to-purple-500/10"></div>

  <header class="relative z-10 max-w-4xl mx-auto px-6 pt-12 pb-6">
    <div class="flex items-center gap-4">
      <div class="w-12 h-12 rounded-2xl bg-indigo-400/15 ring-1 ring-indigo-300/20 grid place-items-center">
        <span class="text-2xl">üåô</span>
      </div>
      <div>
        <h1 class="text-3xl md:text-5xl font-extrabold tracking-tight">Coletor de Sonhos</h1>
        <p class="text-slate-300 mt-2 max-w-prose">Um espa√ßo seguro para compartilhar relatos sobre os seus sonhos. Trechos poder√£o compor um projeto de pesquisa, sempre com consentimento e anonimato.</p>
      </div>
    </div>
  </header>

  <main class="relative z-10 max-w-4xl mx-auto px-6 pb-20">
    <section class="mb-8">
      <div class="rounded-2xl p-6 bg-slate-900/60 backdrop-blur border border-indigo-400/20 shadow-sm">
        <h2 class="text-xl font-semibold">Sobre o projeto</h2>
        <p class="mt-2 text-slate-300 leading-relaxed">Buscamos ouvir sonhos de mulheres para mapear afetos, s√≠mbolos e paisagens on√≠ricas. A proposta √© investigar e dar forma a este universo de maneira √©tica e sens√≠vel.</p>
      </div>
    </section>

    <!-- Formul√°rio nativo (Apps Script) -->
    <section class="mb-8" id="form">
      <div class="rounded-2xl p-2 bg-white/90 border border-indigo-100 shadow">
        <div class="p-4">
          <h2 class="text-lg font-semibold text-slate-800">Conte seu sonho</h2>
          <p class="text-slate-600 text-sm">Preencha o formul√°rio abaixo. Se preferir, n√£o informe dados pessoais. Voc√™ pode pedir a exclus√£o do relato depois.</p>
        </div>

        <div class="rounded-xl overflow-hidden p-4">
          <form id="dreamForm"
                action="https://script.google.com/macros/s/AKfycbxVQwNea1Kd7ib3jA9hwN1D5MF11Hgnl4c62i-k86BCwDWmnvjLWhU8-srklTa75FA/exec"
                method="POST"
                class="grid gap-4">

            <!-- Honeypot anti-spam -->
            <div class="hidden">
              <label>Deixe em branco: <input type="text" name="website"></label>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-slate-700">Nome (opcional)</label>
                <input type="text" name="nome" class="mt-1 w-full rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 p-3 caret-indigo-600" placeholder="como voc√™ quer ser chamada" />
              </div>
              <div>
                <label class="block text-sm font-medium text-slate-700">E-mail (opcional)</label>
                <input type="email" name="email" class="mt-1 w-full rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 p-3 caret-indigo-600" placeholder="para contato futuro" />
              </div>
            </div>

            <div class="grid md:grid-cols-3 gap-4">
              <div>
                <label class="block text-sm font-medium text-slate-700">Cidade/UF (opcional)</label>
                <input type="text" name="cidade" class="mt-1 w-full rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 p-3 caret-indigo-600" placeholder="ex.: S√£o Paulo/SP" />
              </div>
              <div>
                <label class="block text-sm font-medium text-slate-700">Data do sonho (opcional)</label>
                <input type="date" name="data_sonho" class="mt-1 w-full rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 p-3 caret-indigo-600" />
              </div>
              <div>
                <label class="block text-sm font-medium text-slate-700">Faixa et√°ria (opcional)</label>
                <select name="faixa_etaria" class="mt-1 w-full rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 p-3">
                  <option value="">Prefiro n√£o informar</option>
                  <option>18‚Äì24</option>
                  <option>25‚Äì34</option>
                  <option>35‚Äì44</option>
                  <option>45‚Äì54</option>
                  <option>55‚Äì64</option>
                  <option>65+</option>
                </select>
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-slate-700">T√≠tulo do sonho (opcional)</label>
              <input type="text" name="titulo" class="mt-1 w-full rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 p-3 caret-indigo-600" placeholder="um nome curto para o sonho" />
            </div>

            <div>
              <label class="block text-sm font-medium text-slate-700">Relato</label>
              <textarea name="relato" rows="6" required class="mt-1 w-full rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 p-3 caret-indigo-600" placeholder="Escreva com detalhes. O que aconteceu? Quem estava presente? Como voc√™ se sentiu?"></textarea>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium text-slate-700">Permite publica√ß√£o an√¥nima de trechos?</label>
                <select name="permissao_publicacao" class="mt-1 w-full rounded-xl border border-slate-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 p-3">
                  <option value="sim">Sim, pode publicar anonimizado</option>
                  <option value="nao">N√£o, mantenha apenas para an√°lise</option>
                </select>
              </div>
              <div class="flex items-center gap-3 mt-6">
                <input type="checkbox" name="consentimento" required class="h-5 w-5 rounded border-slate-400">
                <span class="text-sm text-slate-700">Li e concordo com o uso do meu relato conforme a pol√≠tica abaixo.</span>
              </div>
            </div>

            <div class="flex items-center gap-3">
              <button type="submit" id="submitBtn" class="mt-2 px-6 py-3 rounded-2xl bg-indigo-500 text-white font-semibold shadow hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-400">Enviar sonho ‚ú®</button>
              <span id="statusMsg" class="text-sm text-slate-600 hidden" aria-live="polite">Enviando‚Ä¶</span>
            </div>
          </form>

          <div id="successBox" class="hidden mt-4 p-4 rounded-xl bg-emerald-100 border border-emerald-300 text-emerald-900 text-sm" aria-live="polite">
            Obrigada! Seu sonho foi recebido. Voc√™ pode enviar outro quando quiser.
          </div>
          <div id="errorBox" class="hidden mt-4 p-4 rounded-xl bg-rose-100 border border-rose-300 text-rose-900 text-sm" aria-live="polite">
            N√£o foi poss√≠vel enviar agora. Tente novamente em instantes.
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="rounded-2xl p-6 bg-slate-900/60 backdrop-blur border border-indigo-400/20">
        <h3 class="text-sm font-semibold tracking-wide text-indigo-200">Privacidade & LGPD</h3>
        <p class="mt-2 text-sm text-slate-300">Ao enviar, voc√™ concorda com o uso do relato para fins de pesquisa/express√£o art√≠stica. Publicaremos apenas trechos <span class="font-semibold">anonimizados</span>, quando autorizado. Para retirar o consentimento ou solicitar exclus√£o, escreva para <span class="font-semibold">contato@seuprojeto.org</span>.</p>
      </div>
    </section>

    <footer class="mt-10 text-center text-sm text-slate-400">
      <p>Obrigada por confiar seu sonho. O mundo precisa ouvir vozes como a sua. üñ§</p>
    </footer>
  </main>

  <!-- Bot√µes flutuantes: a√ß√£o e tema -->
  <a href="#form" class="fixed left-4 bottom-4 z-20 px-4 py-2 rounded-full bg-indigo-500 text-white shadow hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-300">Compartilhar agora ‚ú®</a>
  <button id="toggleTheme" class="fixed right-4 bottom-4 z-20 px-4 py-2 rounded-full bg-slate-800/80 text-slate-100 border border-slate-700 hover:bg-slate-700/80 focus:outline-none focus:ring-2 focus:ring-indigo-400">üåì <span id="themeName">Tema</span></button>

  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-3gJwYp4xvY6kGUZ5xE6C0tCqvYb8+6C5J4l0NqU1w3s=" crossorigin="anonymous"></script>
  <script>
  (function($){
    const THEMES = {
      azul: 'from-indigo-950 via-slate-950 to-black',
      noite: 'from-black via-slate-950 to-black'
    };
    function setTheme(name){
      const $b = $('body');
      $b.removeClass(THEMES.azul + ' ' + THEMES.noite);
      $b.addClass(name === 'noite' ? THEMES.noite : THEMES.azul);
      localStorage.setItem('sonhos_theme', name);
      $('#themeName').text(name === 'noite' ? 'Noite profunda' : 'Azul on√≠rico');
    }
    $(function(){
      // tema
      const saved = localStorage.getItem('sonhos_theme');
      setTheme(saved || 'azul');
      $('#toggleTheme').on('click', function(){
        const cur = localStorage.getItem('sonhos_theme') || 'azul';
        setTheme(cur === 'azul' ? 'noite' : 'azul');
      });

      // rolar suavemente para o formul√°rio
      $('a[href^="#form"]').on('click', function(e){
        e.preventDefault();
        const $t = $('#form');
        if($t.length){ window.scrollTo({ top: $t.offset().top - 12, behavior: 'smooth' }); }
      });
    });
  })(jQuery);
  </script>

  <!-- Envio com AJAX (confirma√ß√£o imediata) -->
  <script>
  (function($){
    $(function(){
      const $form = $('#dreamForm');
      const $btn = $('#submitBtn');
      const $status = $('#statusMsg');
      const $success = $('#successBox');
      const $error = $('#errorBox');

      $form.on('submit', function(e){
        e.preventDefault(); // evita submit tradicional
        $error.addClass('hidden'); // limpa erro
        $btn.prop('disabled', true);
        $status.removeClass('hidden').text('Enviando‚Ä¶');

        const fd = new FormData(this);

        // Honeypot: se preenchido, aborta silenciosamente
        if ((fd.get('website') || '').trim() !== '') {
          $status.addClass('hidden');
          $btn.prop('disabled', false);
          return;
        }

        fetch($form.attr('action'), {
          method: 'POST',
          mode: 'no-cors',  // evita bloqueio de CORS (resposta ser√° opaca)
          body: fd
        })
        .then(() => {
          // Considera sucesso ap√≥s envio
          $status.addClass('hidden');
          $btn.prop('disabled', false);
          $form[0].reset();
          $success.removeClass('hidden');
          setTimeout(() => $success.addClass('hidden'), 6000);
        })
        .catch(() => {
          $status.addClass('hidden');
          $btn.prop('disabled', false);
          $error.removeClass('hidden');
        });
      });
    });
  })(jQuery);
  </script>
</body>
</html>
